cljtags() {
  find . \! -name '.*' -name '*.clj' | xargs etags --regex='/[ \t\(]*def[a-z]* \([a-z-!]+\)/\1/' --regex='/[ \t\(]*ns \([a-z.]+\)/\1/'
}

storm-post() {
  clean-storm-zk
  mv ~/local/svn/storm/conf/defaults.yaml{,.bak}
  mv ~/local/svn/storm/conf/storm.yaml{.bak,}
}

storm-pre() {
  mv ~/local/svn/storm/conf/defaults.yaml{.bak,}
  mv ~/local/svn/storm/conf/storm.yaml{,.bak}
}

storm-pre-jar() {
  storm-pre
  cd ~/local/svn/storm
  lein jar
}

storm-all() {
    storm-pre-jar && storm-post
}

clean-storm-zk() {
    rm -rf /tmp/zookeeper/*
    rm -rf ~/local/svn/storm/storm-local/*
    rm -rf ~/local/svn/storm/logs/*
}

start-nimbus() {
    ~/local/svn/storm/bin/storm nimbus
}

start-supervisor() {
    ~/local/svn/storm/bin/storm supervisor
}


start-ui() {
    ~/local/svn/storm/bin/storm ui
}

submit-topology() {
    ~/local/svn/storm/bin/storm jar ~/local/svn/storm-starter/storm-starter-0.0.1-SNAPSHOT.jar $1 $2
}

fvim() {
    filename=`find . -name $1`
    vim $filename
}

femacs() {
    filename=`find . -name $1`
    emacs $filename
}
fcd() {
    filename=`find . -name $1`
    echo $filename
    cd `dirname $filename`
}

jlog() {
    $1 /home/james/output/$2/logs/sys/webx/webx.log
}

vlog() {
    jlog vim `appname`
}

tlog() {
    jlog "tail -f" `appname`
}

appname() {
    curpath=`pwd`
    curname=`basename $curpath | sed 's/_.*$//g'`
    echo $curname
}

jmvn () {
    echo "app name is `appname`"
    mvn clean install -DuserProp=../antx_`appname`.properties -Dmaven.test.skip=true
}

jstart() {
    jmvn `appname` && ./deploy/target/web-deploy/bin/jettyctl.sh run
}

jstart_center() {
    jmvn `appname` && ./deploy/target/web-deploy/bin/start-service.sh
}

jstart_tc() {
    jmvn `appname` && ./tradecenter.deploy/target/web-deploy/bin/start-service.sh
}


hosts() {
    hostsdir=~/.hosts

    if [ -z $1 ]; then
	echo "hosts [ls|edit|hostsname]";
    else
        case $1 in
            ls)
               /bin/ls $hostsdir;;
            edit)
               emacs $hostsdir/$2
               hosts $2;;
            cat)
               cat $hostsdir/$2;;
            *)
               cp $hostsdir/$1 /etc/hosts
               # show the first two lines of the
               # the hosts -- to check everything is right
               head -n 2 /etc/hosts;;
        esac
    fi
}

